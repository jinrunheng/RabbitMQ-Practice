<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.github.takeaway.dao.IOrderDetailDao">

    <resultMap id="orderDetailResultMap" type="com.github.takeaway.entity.OrderDetail">
        <id property="id" column="ID"/>
        <result property="status" column="STATUS"/>
        <result property="address" column="ADDRESS"/>
        <result property="accountId" column="ACCOUNT_ID"/>
        <result property="productId" column="PRODUCT_ID"/>
        <result property="deliverymanId" column="DELIVERYMAN_ID"/>
        <result property="settlementId" column="SETTLEMENT_ID"/>
        <result property="rewardId" column="REWARD_ID"/>
        <result property="price" column="price"/>
        <result property="date" column="DATE"/>
    </resultMap>

    <insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="com.github.takeaway.entity.OrderDetail">
        insert into `rabbit`.`order_detail`(status, address, account_id, product_id, deliveryman_id, settlement_id,
                                            reward_id, price, date)
        values (#{status}, #{address}, #{accountId}, #{productId}, #{deliverymanId}, #{settlementId}, #{rewardId},
                #{price}, #{date})
    </insert>

    <update id="update" parameterType="com.github.takeaway.entity.OrderDetail">
        update `rabbit`.`order_detail`
        set status         = #{status},
            address        = #{address},
            account_id     = #{accountId},
            product_id     = #{productId},
            deliveryman_id = #{deliverymanId},
            settlement_id  = #{settlementId},
            reward_id      = #{rewardId},
            price          = #{price},
            date           = #{date}
        where id = #{id}
    </update>

    <select id="queryOrder" parameterType="java.lang.Integer" resultMap="orderDetailResultMap">
        select *
        from `rabbit`.`order_detail`
        where id = #{id}
    </select>
</mapper>